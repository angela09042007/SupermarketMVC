<%- include('../partials/header', { title: 'Edit Promo Code' }) %>
<%- include('../partials/navbar', { user: locals.user }) %>

<div class="container">
  <div class="content-card">
    <div class="section-heading mb-3 d-flex justify-content-between align-items-center flex-wrap gap-2">
      <div>
        <p class="eyebrow mb-1">Promotions</p>
        <h2 class="mb-0">Edit discount code</h2>
      </div>
      <a href="/admin/discount-codes" class="btn btn-sm btn-light">Back</a>
    </div>

    <form action="/admin/discount-codes/edit/<%= code.id %>" method="POST" class="form-grid">
      <div class="form-group">
        <label class="form-label">Code</label>
        <input type="text" name="code" class="form-control" value="<%= code.code %>" required>
      </div>
      <div class="form-group">
        <label class="form-label">Description</label>
        <textarea name="description" class="form-control" rows="2"><%= code.description %></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">Percent Off (%)</label>
        <input type="number" step="0.01" name="percent_off" class="form-control" value="<%= code.percent_off || '' %>">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">Uses Remaining (blank for unlimited)</label>
          <input type="number" name="uses_remaining" min="0" class="form-control" value="<%= code.uses_remaining === null ? '' : code.uses_remaining %>">
        </div>
        <div class="form-group">
          <label class="form-label">Expires At (optional)</label>
          <input type="datetime-local" name="expires_at" class="form-control" value="<%= code.expires_at ? new Date(code.expires_at).toISOString().slice(0,16) : '' %>">
        </div>
      </div>
      <div class="form-group form-check">
        <input type="checkbox" name="active" id="active" class="form-check-input" <%= code.active ? 'checked' : '' %>>
        <label for="active" class="form-check-label">Active</label>
      </div>
      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="/admin/discount-codes" class="btn btn-light">Cancel</a>
      </div>
    </form>
  </div>
</div>

<%- include('../partials/footer') %>
