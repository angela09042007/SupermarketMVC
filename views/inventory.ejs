<%- include('partials/header', { title: 'Supermarket App' }) %>
<%- include('partials/navbar', { user: locals.user }) %>

  <div class="container">
    <div class="content-card">
      <div class="section-heading mb-3">
        <div>
          <p class="eyebrow mb-1">Inventory</p>
          <h2 class="mb-0">Products</h2>
          <p class="muted mb-0">Manage stock with readable rows and quick actions.</p>
        </div>
        <div class="d-flex gap-2">
          <span class="chip">Admin</span>
          <a href="/addProduct" class="btn btn-sm btn-primary">Add product</a>
        </div>
      </div>

      <%- include('partials/search', { action: '/search', placeholder: 'Search products...', searchTerm: (typeof searchTerm !== 'undefined' ? searchTerm : '') }) %>

      <div class="table-responsive table-card">
        <table class="table table-hover align-middle text-center mb-0">
          <thead>
              <tr>
                <th width="140">Product</th>
                <th width="140">Image</th>
                <th width="80">Quantity</th>
                <th width="80">Price</th>
                <th width="80">Edit</th>
                <th width="80">Delete</th>
              </tr>
          </thead>
          <tbody>
            <% for(let i=0; i < products.length; i++) { %>
              <tr>
                <td><a href="/product/<%= products[i].id %>"><%= products[i].productName %></a></td>
                <td><img src="images/<%= products[i].image %>" alt="<%= products[i].productName %>"></td>
                <td><%= products[i].quantity %></td>
                <td>$<%= products[i].price.toFixed(2) %></td>
                <td><a href="/updateProduct/<%= products[i].id %>" class="btn btn-sm btn-light">Edit</a></td>
                <td><a href="/deleteProduct/<%= products[i].id %>" class="btn btn-sm btn-outline-danger" onclick="return confirm('Are you sure you want to delete this product?')">Delete</a></td>
              </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

<%- include('partials/footer') %>
